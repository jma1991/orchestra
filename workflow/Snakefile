# Author: James Ashmore
# Copyright: Copyright 2020, James Ashmore
# Email: jashmore@ed.ac.uk
# License: MIT

rule all:
    input:
        # Quality Control
        "analysis/01-quality-control/mockSCE.rds",
        "analysis/01-quality-control/perCellQCMetrics.csv",
        "analysis/01-quality-control/plotCellSum.pdf",
        "analysis/01-quality-control/plotCellDetected.pdf",
        "analysis/01-quality-control/plotAltExp.Spikes.pdf",
        "analysis/01-quality-control/perFeatureQCMetrics.csv",
        "analysis/01-quality-control/plotFeatureMean.pdf",
        "analysis/01-quality-control/plotFeatureDetected.pdf",
        "analysis/01-quality-control/plotMeanVsDetected.pdf",
        "analysis/01-quality-control/quickPerCellQC.csv",
        "analysis/01-quality-control/filterCellByQC.rds",
        # Normalization
        "analysis/02-normalization/librarySizeFactors.csv",
        "analysis/02-normalization/librarySizeFactors.pdf",
        "analysis/02-normalization/calculateSumFactors.csv",
        "analysis/02-normalization/calculateSumFactors.pdf",
        "analysis/02-normalization/computeSpikeFactors.csv",
        "analysis/02-normalization/computeSpikeFactors.pdf",
        "analysis/02-normalization/logNormCounts.rds",
        # Feature Selection
        "analysis/03-feature-selection/modelGeneVar.csv",
        "analysis/03-feature-selection/modelGeneVarWithSpikes.csv",
        "analysis/03-feature-selection/modelGeneCV2.csv",
        "analysis/03-feature-selection/modelGeneCV2WithSpikes.csv",
        "analysis/03-feature-selection/modelGeneVarByPoisson.csv",
        "analysis/03-feature-selection/plotGeneVar.pdf",
        "analysis/03-feature-selection/plotGeneVarWithSpikes.pdf",
        "analysis/03-feature-selection/plotGeneCV2.pdf"

# Include workflow rules
include: "rules/01-quality-control.smk"
include: "rules/02-normalization.smk"
include: "rules/03-feature-selection.smk"