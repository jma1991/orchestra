# Author: James Ashmore
# Copyright: Copyright 2020, James Ashmore
# Email: jashmore@ed.ac.uk
# License: MIT

rule all:
    input:
        # Droplet processing
        "analysis/01-droplet-processing/emptyDrops.rds",
        "analysis/01-droplet-processing/filterDrops.rds",
        # Quality control
        "analysis/02-quality-control/perCellQCMetrics.rds",
        "analysis/02-quality-control/quickPerCellQC.rds",
        "analysis/02-quality-control/filterCellByQC.rds",
        # Normalization
        "analysis/03-normalization/calculateSumFactors.rds",
        "analysis/03-normalization/logNormCounts.rds",
        # Feature selection
        "analysis/04-feature-selection/modelGeneVar.rds",
        "analysis/04-feature-selection/modelGeneVar.getTopHVGs.rds",
        "analysis/04-feature-selection/setTopHVGs.rds",
        # Dimensionality reduction
        "analysis/05-reduced-dimensions/calculatePCA.rds",
        "analysis/05-reduced-dimensions/parallelTSNE.rds",
        "analysis/05-reduced-dimensions/visualiseTSNE.pdf",
        "analysis/05-reduced-dimensions/parallelUMAP.rds",
        "analysis/05-reduced-dimensions/visualiseUMAP.pdf"
        # Cell cycle assignment


# Workflow rules
include: "rules/01-droplet-processing.smk"
include: "rules/02-quality-control.smk"
include: "rules/03-normalization.smk"
include: "rules/04-feature-selection.smk"
include: "rules/05-reduced-dimensions.smk"
include: "rules/cell-cycle.smk"